<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Example</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.css" />
    <link rel="stylesheet" href="./museumStyle.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.js"></script>
    <style>
        .first-hotspot {
            cursor: pointer;
        }
    </style>
</head>

<body>

    <div id="panorama">
        <div id="controls">
            <div class="visible">
                <div class="ctrl ctrl-nav ctrl-mobile" id="pan-up">&#9650;</div>
                <div class="ctrl ctrl-nav ctrl-mobile" id="pan-down">&#9660;</div>
                <div class="ctrl ctrl-nav ctrl-mobile" id="pan-left">&#9664;</div>
                <div class="ctrl ctrl-nav ctrl-mobile" id="pan-right">&#9654;</div>
                <div class="ctrl ctrl-nav ctrl-mobile" id="zoom-in">&plus;</div>
                <div class="ctrl ctrl-nav ctrl-mobile" id="zoom-out">&minus;</div>
                <div class="ctrl ctrl-nav ctrl-mobile" id="fullscreen">&#x2922;</div>
                <div class="ctrl toggle-bar" id="toggle-bar" onclick="toggleBar()">&#9776;</div>
            </div>
        </div>

        <div class="map">
            <div class="point" id="first-scene">
                <input type="radio" name="radio-group" id="first-radio" style="display: none;" checked>
                <label for="first-radio">1</label>
            </div>
            <div class="point" id="second-scene">
                <input type="radio" name="radio-group" id="second-radio" style="display: none;">
                <label for="second-radio">2</label>
            </div>
        </div>
    </div>

    <script>
        let request = new XMLHttpRequest();
        request.open("GET", "./index.json", false);
        request.send(null)
        var data = JSON.parse(request.responseText);

        let viewer = pannellum.viewer('panorama', data);
        let radioHotSpots = document.querySelectorAll('.point');

        radioHotSpots.forEach(point => {
            point.addEventListener('click', (event) => {
                const target = event.currentTarget;
                viewer.loadScene(target.id);
            });
        });

        let turnRadio = function(sceneId) {
            let hotSpot = document.getElementById(sceneId);
            let scene = 'scene';
            hotSpot.id = hotSpot.id.replace(scene, 'radio');
            hotSpot = hotSpot.checked;
        };

        function toggleBar() {
            let buttons = document.querySelectorAll('.ctrl-nav')
            buttons.forEach(element => {
                element.classList.toggle('ctrl-toggle-off');
                element.classList.toggle('ctrl-mobile');
                element.classList.toggle('ctrl-toggle-on');
            });
            let buttonToggle = document.getElementById('toggle-bar');
            buttonToggle.classList.toggle('toggle-bar-add');
            buttonToggle.classList.toggle('transition-button');
        }

        function keysUp() {
            document.getElementById('pan-up').addEventListener('click', function(e) {
                viewer.setPitch(viewer.getPitch() + 10);
            });
            document.getElementById('pan-down').addEventListener('click', function(e) {
                viewer.setPitch(viewer.getPitch() - 10);
            });
            document.getElementById('pan-left').addEventListener('click', function(e) {
                viewer.setYaw(viewer.getYaw() - 10);
            });
            document.getElementById('pan-right').addEventListener('click', function(e) {
                viewer.setYaw(viewer.getYaw() + 10);
            });
            document.getElementById('zoom-in').addEventListener('click', function(e) {
                viewer.setHfov(viewer.getHfov() - 10);
            });
            document.getElementById('zoom-out').addEventListener('click', function(e) {
                viewer.setHfov(viewer.getHfov() + 10);
            });
            document.getElementById('fullscreen').addEventListener('click', function(e) {
                viewer.toggleFullscreen();
            });
        };
        keysUp();
    </script>

</body>

</html>