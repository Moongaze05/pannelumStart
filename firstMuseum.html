<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Example</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.css" />
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
        }
        
        #panorama {
            width: 100%;
            height: 100vh;
            box-sizing: border-box;
        }
        
        #controls {
            position: absolute;
            bottom: 0;
            z-index: 2;
            text-align: center;
            width: 100%;
            padding-bottom: 3px;
        }
        
        .ctrl {
            padding: 8px 5px;
            width: 30px;
            text-align: center;
            background: rgba(200, 200, 200, 0.8);
            display: inline-block;
            cursor: pointer;
        }
        
        .ctrl:hover {
            background: rgba(200, 200, 200, 1);
        }
        
        .ctrl-toggle {
            display: inline-block;
        }
        
        .ctrl-toggle-off {
            display: none;
        }
        
        .toggle-bar {
            display: inline-block;
            /* transform: translateX(10px);
            transition: all 2s ease-in-out; */
        }
        
        .ctrl-toggle-button {
            display: inline-block;
        }
        
        .ctrl-mobile {
            display: inline-block;
        }
        
        .transition-button {
            transform: translateX(50%);
            translate: all 2s ease-in-out;
        }
        
        @media (max-width:575px) {
            #panorama {
                height: 86.2vh;
            }
            .ctrl-toggle {
                display: inline-block;
            }
            .toggle-bar {
                position: absolute;
                left: 0;
                top: -15.2vh;
            }
            .toggle-bar-add {
                top: -8.5vh;
            }
            .ctrl-mobile {
                display: none;
            }
            .ctrl-toggle-on {
                display: inline-block;
            }
        }
    </style>
</head>

<body>

    <div id="panorama">
        <div id="controls">
            <div class="ctrl ctrl-nav ctrl-mobile" id="pan-up">&#9650;</div>
            <div class="ctrl ctrl-nav ctrl-mobile" id="pan-down">&#9660;</div>
            <div class="ctrl ctrl-nav ctrl-mobile" id="pan-left">&#9664;</div>
            <div class="ctrl ctrl-nav ctrl-mobile" id="pan-right">&#9654;</div>
            <div class="ctrl ctrl-nav ctrl-mobile" id="zoom-in">&plus;</div>
            <div class="ctrl ctrl-nav ctrl-mobile" id="zoom-out">&minus;</div>
            <div class="ctrl ctrl-nav ctrl-mobile" id="fullscreen">&#x2922;</div>
            <div class="ctrl toggle-bar" id="toggle-bar" onclick="toggleBar()">&#9776;</div>
        </div>

        <div class="map">

        </div>
    </div>

    <script>
        var request = new XMLHttpRequest();
        request.open("GET", "./index.json", false);
        request.send(null)
        var data = JSON.parse(request.responseText);

        let viewer = pannellum.viewer('panorama', data);

        function toggleBar() {
            let buttons = document.querySelectorAll('.ctrl-nav')
            buttons.forEach(element => {
                element.classList.toggle('ctrl-toggle-off');
                element.classList.toggle('ctrl-mobile');
                element.classList.toggle('ctrl-toggle-on');
            });
            let buttonToggle = document.getElementById('toggle-bar');
            buttonToggle.classList.toggle('toggle-bar-add');
            buttonToggle.classList.toggle('transition-button');
        }



        function keysUp() {
            document.getElementById('pan-up').addEventListener('click', function(e) {
                viewer.setPitch(viewer.getPitch() + 10);
            });
            document.getElementById('pan-down').addEventListener('click', function(e) {
                viewer.setPitch(viewer.getPitch() - 10);
            });
            document.getElementById('pan-left').addEventListener('click', function(e) {
                viewer.setYaw(viewer.getYaw() - 10);
            });
            document.getElementById('pan-right').addEventListener('click', function(e) {
                viewer.setYaw(viewer.getYaw() + 10);
            });
            document.getElementById('zoom-in').addEventListener('click', function(e) {
                viewer.setHfov(viewer.getHfov() - 10);
            });
            document.getElementById('zoom-out').addEventListener('click', function(e) {
                viewer.setHfov(viewer.getHfov() + 10);
            });
            document.getElementById('fullscreen').addEventListener('click', function(e) {
                viewer.toggleFullscreen();
            });
        };
        keysUp();
    </script>

</body>

</html>