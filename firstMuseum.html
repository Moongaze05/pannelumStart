<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Example</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.css" />
    <link rel="stylesheet" href="museumStyle.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.js"></script>
</head>

<body>

    <div id="panorama">
        <div id="controls">
            <div class="visible">
                <div class="ctrl ctrl-nav ctrl-mobile" id="pan-up">&#9650;</div>
                <div class="ctrl ctrl-nav ctrl-mobile" id="pan-down">&#9660;</div>
                <div class="ctrl ctrl-nav ctrl-mobile" id="pan-left">&#9664;</div>
                <div class="ctrl ctrl-nav ctrl-mobile" id="pan-right">&#9654;</div>
                <div class="ctrl ctrl-nav ctrl-mobile" id="zoom-in">&plus;</div>
                <div class="ctrl ctrl-nav ctrl-mobile" id="zoom-out">&minus;</div>
                <div class="ctrl ctrl-nav ctrl-mobile" id="fullscreen">&#x2922;</div>
                <div class="ctrl toggle-bar" id="toggle-bar" onclick="toggleBar()">&#9776;</div>
            </div>
        </div>

        <div class="map">
            <!-- <div class="point" id="first-scene"><svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="20px" height="25px" viewBox="0 0 97.713 97.713" style="enable-background:new 0 0 97.713 97.713;" xml:space="preserve">
           <g>
               <path d="M48.855,0C29.021,0,12.883,16.138,12.883,35.974c0,5.174,1.059,10.114,3.146,14.684
                   c8.994,19.681,26.238,40.46,31.31,46.359c0.38,0.441,0.934,0.695,1.517,0.695s1.137-0.254,1.517-0.695
                   c5.07-5.898,22.314-26.676,31.311-46.359c2.088-4.57,3.146-9.51,3.146-14.684C84.828,16.138,68.69,0,48.855,0z M48.855,54.659
                   c-10.303,0-18.686-8.383-18.686-18.686c0-10.304,8.383-18.687,18.686-18.687s18.686,8.383,18.686,18.687
                   C67.542,46.276,59.159,54.659,48.855,54.659z"/>
           </g>
        </svg>
            </div> -->
            <!-- <div class="point" id="second-scene"><svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="20px" height="25px" viewBox="0 0 97.713 97.713" style="enable-background:new 0 0 97.713 97.713;" xml:space="preserve">
                <g>
                    <path d="M48.855,0C29.021,0,12.883,16.138,12.883,35.974c0,5.174,1.059,10.114,3.146,14.684
                        c8.994,19.681,26.238,40.46,31.31,46.359c0.38,0.441,0.934,0.695,1.517,0.695s1.137-0.254,1.517-0.695
                        c5.07-5.898,22.314-26.676,31.311-46.359c2.088-4.57,3.146-9.51,3.146-14.684C84.828,16.138,68.69,0,48.855,0z M48.855,54.659
                        c-10.303,0-18.686-8.383-18.686-18.686c0-10.304,8.383-18.687,18.686-18.687s18.686,8.383,18.686,18.687
                        C67.542,46.276,59.159,54.659,48.855,54.659z"/>
                </g>
             </svg>
            </div> -->
            <div class="point" id="first-scene">
                <input type="radio" name="radio" id="first-radio">
                <label for="first-radio"></label>
            </div>
            <div class="point" id="second-scene">
                <input type="radio" name="radio" id="second-radio">
                <label for="second-radio"></label>
            </div>
        </div>
    </div>

    <script>
        var request = new XMLHttpRequest();
        request.open("GET", "./index.json", false);
        request.send(null)
        var data = JSON.parse(request.responseText);

        let viewer = pannellum.viewer('panorama', data);
        let points = document.querySelectorAll('.point');

        points.forEach(point => {
            point.addEventListener('click', (event) => {
                let target = event.currentTarget;
                fillRed(target);
            });
        });

        function fillRed(target) {
            target.classList.toggle('add-red');
        }

        function toggleBar() {
            let buttons = document.querySelectorAll('.ctrl-nav')
            buttons.forEach(element => {
                element.classList.toggle('ctrl-toggle-off');
                element.classList.toggle('ctrl-mobile');
                element.classList.toggle('ctrl-toggle-on');
            });
            let buttonToggle = document.getElementById('toggle-bar');
            buttonToggle.classList.toggle('toggle-bar-add');
            buttonToggle.classList.toggle('transition-button');
        }

        function keysUp() {
            document.getElementById('pan-up').addEventListener('click', function(e) {
                viewer.setPitch(viewer.getPitch() + 10);
            });
            document.getElementById('pan-down').addEventListener('click', function(e) {
                viewer.setPitch(viewer.getPitch() - 10);
            });
            document.getElementById('pan-left').addEventListener('click', function(e) {
                viewer.setYaw(viewer.getYaw() - 10);
            });
            document.getElementById('pan-right').addEventListener('click', function(e) {
                viewer.setYaw(viewer.getYaw() + 10);
            });
            document.getElementById('zoom-in').addEventListener('click', function(e) {
                viewer.setHfov(viewer.getHfov() - 10);
            });
            document.getElementById('zoom-out').addEventListener('click', function(e) {
                viewer.setHfov(viewer.getHfov() + 10);
            });
            document.getElementById('fullscreen').addEventListener('click', function(e) {
                viewer.toggleFullscreen();
            });
        };
        keysUp();
    </script>

</body>

</html>